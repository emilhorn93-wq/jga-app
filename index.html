<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POK√âMON JGA EDITION</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* ============ POK√âMON 8-BIT STIL START ============ */
        :root {
            --poke-bg-blue: #243d5c;    /* Dunkelblaues Gameboy Men√º */
            --poke-ui-blue: #305082;    /* Rahmenfarbe der Dialogboxen */
            --poke-white: #f8f8f8;      /* Hintergrund Textboxen */
            --poke-text: #222222;       /* Fast schwarzer Text */
            --poke-yellow: #f8d030;     /* Pikachu Gelb (Titel) */
            --poke-red: #ff0000;        /* Rote Edition */
            --poke-green: #48c048;      /* Gr√ºne Edition / Korrekt */
            --poke-shadow: 4px 4px 0px #000; /* Harter Pixelschatten */
        }

        body {
            font-family: 'Press Start 2P', cursive, monospace; 
            background-color: var(--poke-bg-blue);
            /* Ein kleines Raster-Muster im Hintergrund f√ºr mehr Retro-Feeling */
            background-image: 
                linear-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 0, 0, 0.1) 1px, transparent 1px);
            background-size: 4px 4px;
            color: var(--poke-text);
            text-align: center;
            padding: 20px;
            margin: 0;
            image-rendering: pixelated; 
            font-size: 12px; 
            line-height: 1.6;
        }
        
        h1 { 
            /* Der typische Pok√©mon-Titel-Look: Gelb mit dickem blauen Rand */
            color: var(--poke-yellow); 
            text-shadow: 3px 3px 0 #243d5c, -3px -3px 0 #243d5c, 3px -3px 0 #243d5c, -3px 3px 0 #243d5c, 5px 5px 0 #000;
            font-size: 22px;
            margin-bottom: 35px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        h2, h3 {
            color: var(--poke-text);
            font-size: 14px;
            margin-top: 25px;
            text-transform: uppercase;
        }

        /* Der Haupt-Container sieht aus wie eine gro√üe Dialogbox */
        .container {
            background-color: var(--poke-white);
            border: 4px solid var(--poke-ui-blue); 
            /* Doppelter Rahmen-Effekt wie im Spiel */
            box-shadow: 0 0 0 4px #000, inset 0 0 0 2px #000; 
            padding: 25px;
            max-width: 500px;
            margin: 0 auto;
            position: relative;
            border-radius: 4px; 
        }
        
        /* RETRO BUTTONS IM POKEMON STIL */
        .btn {
            font-family: 'Press Start 2P', cursive, monospace;
            background-color: var(--poke-white); 
            color: var(--poke-text);
            border: 3px solid var(--poke-ui-blue);
            padding: 15px 10px;
            margin: 12px 0;
            font-size: 12px;
            cursor: pointer;
            width: 100%;
            transition: all 0.1s;
            text-transform: uppercase;
            /* Pixeliger 3D Effekt */
            box-shadow: inset -3px -3px 0px #aaa, inset 3px 3px 0px #fff, 3px 3px 0 #000; 
            border-radius: 4px;
        }
        .btn:hover { background-color: #e0e0e0; }
        .btn:active { 
            transform: translate(3px, 3px); 
            box-shadow: inset -2px -2px 0px #aaa, inset 2px 2px 0px #fff;
        }
        
        /* Spezielle Button Farben (Editionen-Style) */
        /* Gelbe Edition (Kasse) */
        .btn.primary { background-color: var(--poke-yellow); color: black; box-shadow: inset -3px -3px 0px #c7a500, inset 3px 3px 0px #ffff66, 3px 3px 0 #000; }
        /* Rote Edition (Quiz) */
        .btn.quiz-btn { background-color: var(--poke-red); color: white; box-shadow: inset -3px -3px 0px #990000, inset 3px 3px 0px #ff6666, 3px 3px 0 #000; border-color: #990000;}
        /* Gr√ºne Edition (Speichern/Korrekt) */
        .btn.save-btn { background-color: var(--poke-green); color: white; box-shadow: inset -3px -3px 0px #006600, inset 3px 3px 0px #66ff66, 3px 3px 0 #000; border-color: #006600;}
        /* Blaue Edition (Zur√ºck) */
        .btn.back-btn { background-color: var(--poke-ui-blue); color: white; margin-top: 30px; box-shadow: inset -3px -3px 0px #1a2d45, inset 3px 3px 0px #5b7db5, 3px 3px 0 #000; border-color: #1a2d45;}

        /* EINGABEFELDER IM RETRO LOOK */
        input[type="text"], input[type="number"] {
            font-family: 'Press Start 2P', cursive, monospace;
            width: 90%;
            padding: 12px;
            margin: 8px 0;
            border: 3px solid var(--poke-ui-blue);
            background-color: #ffffff;
            color: var(--retro-text);
            font-size: 10px;
            border-radius: 4px;
            box-shadow: inset 3px 3px 0px #ccc;
        }
        
        /* QUIZ SPEZIAL STYLES */
        /* Die Fragebox sieht aus wie das Kampfdialog-Fenster */
        .question-box {
             background-color: var(--poke-white);
             border: 4px solid var(--poke-ui-blue);
             border-radius: 8px;
             padding: 15px;
             margin-bottom: 25px;
             text-align: left;
             box-shadow: inset 0 0 0 2px #000;
        }

        .btn.correct-ans { background-color: var(--poke-green) !important; color: white; border-color: #004d00;}
        .btn.wrong-ans { background-color: var(--poke-red) !important; color: white; border-color: #4d0000;}
        
        #feedback { 
            font-size: 12px; 
            margin-top: 20px; 
            min-height: 60px; 
            padding: 15px; 
            border: 4px solid var(--poke-ui-blue);
            border-radius: 8px;
            display: none;
            text-align: left;
        }
        .correct { background-color: var(--poke-green); color: white; }
        .wrong { background-color: var(--poke-red); color: white; }
        #next-btn { display: none; margin-top: 20px; }
        
        /* KATZEKASSE STYLES - INVENTAR LOOK */
        .expense-item {
            background-color: #e8e8e8; /* Etwas dunkler, wie ein Men√ºeintrag */
            padding: 10px;
            border: 3px solid var(--poke-ui-blue);
            border-radius: 4px;
            margin: 8px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 10px;
            text-align: left;
            box-shadow: 2px 2px 0 #000;
        }
        .del-btn { 
            background-color: var(--poke-red); 
            color: white; 
            border: 2px solid black; 
            padding: 6px 8px; 
            cursor: pointer; 
            font-family: inherit;
            font-size: 8px;
            box-shadow: inset -2px -2px 0 #550000, inset 2px 2px 0 #ff6666;
        }
        #splitResult { text-align: left; background-color: #fff; padding: 15px; border: 4px solid var(--poke-ui-blue); border-radius: 4px; margin-top: 15px; font-size: 10px; box-shadow: inset 0 0 0 2px #000;}
        #splitResult ul { padding-left: 15px; list-style-type: square; }
        #splitResult li { margin-bottom: 12px; }
        #syncStatus { font-size: 9px; color: #666; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px;}
        hr { border: none; border-top: 3px dashed var(--poke-ui-blue); }
        /* ============ POK√âMON STIL ENDE ============ */
    </style>
</head>
<body>

    <div class="container">
        <div id="menu" class="page active">
            <h1>POK√âMON<br>JGA EDITION</h1>
            <p>A WILD BACHELOR PARTY APPEARED!</p>
            <br>
            <p style="font-size: 10px;">CHOOSE YOUR OPTION:</p>
            <button class="btn primary" onclick="showPage('kasse'); loadDataFromCloud();">üí∞ KATZEKASSE (SYNC)</button>
            <button class="btn quiz-btn" onclick="showPage('quiz')">ü§ì TRAINER QUIZ</button>
        </div>

        <div id="kasse" class="page">
            <h2>üí∞ YOUR BAG (KASSE)</h2>
            <div id="syncStatus">‚òÅÔ∏è CONNECTING TO PC...</div>
            
            <p>HOW MANY TRAINERS?</p>
            <input type="number" id="totalPeople" value="5" min="2" onchange="saveDataToCloud()">
            
            <hr>
            
            <h3>ADD NEW ITEM (AUSGABE)</h3>
            <input type="text" id="expName" placeholder="TRAINER NAME (z.B. Ash)">
            <input type="text" id="expDesc" placeholder="ITEM USED (z.B. Bier)">
            <input type="number" id="expAmount" placeholder="COST (‚ÇΩ/‚Ç¨)">
            <button class="btn save-btn" onclick="addExpense()">‚ûï SAVE TO BAG</button>
            
            <div id="expenseList" style="margin-top: 20px;"></div>
            
            <button class="btn primary" style="margin-top: 20px;" onclick="calculateSplit()">üìä CHECK BALANCE</button>
            
            <div id="splitResult"></div>
            <button class="btn back-btn" onclick="showPage('menu')">‚¨ÖÔ∏è RUN (BACK)</button>
        </div>

        <div id="quiz" class="page">
            <h2>ü§ì TRAINER BATTLE! ü§ì</h2>
            <div id="progress" style="color:#666; font-size:10px; margin-bottom:15px;">TURN 1 / 1</div>
            
            <div class="question-box">
                 <div id="question" style="font-size: 12px; line-height: 1.8;">A wild question appeared! Loading data...</div>
            </div>

            <div id="answers"></div>
            <div id="feedback"></div>
            <button id="next-btn" class="btn quiz-btn" style="background-color: var(--poke-ui-blue);" onclick="nextQuestion()">NEXT TURN ‚û°Ô∏è</button>
            <button class="btn back-btn" onclick="showPage('menu')">‚¨ÖÔ∏è RUN (BACK)</button>
        </div>
    </div>

    <script>
        // ==========================================
        // ‚ö†Ô∏è DEINE GOOGLE TABELLEN URL HIER EINF√úGEN:
        const GOOGLE_SHEET_URL = "HIER_DEINE_URL_EINF√úGEN";
        // ==========================================

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
        }

        // --- CLOUD DATENBANK LOGIK ---
        let appData = { totalPeople: 5, expenses: [] };

        function loadDataFromCloud() {
            if (GOOGLE_SHEET_URL === "HIER_DEINE_URL_EINF√úGEN") {
                document.getElementById('syncStatus').innerText = "‚ö†Ô∏è LINK ERROR! CHECK CABLE.";
                document.getElementById('syncStatus').style.color = "red";
                return;
            }

            document.getElementById('syncStatus').innerText = "‚òÅÔ∏è DOWNLOADING FROM PC...";
            
            fetch(GOOGLE_SHEET_URL)
                .then(response => response.json())
                .then(data => {
                    if (data && data.expenses) {
                        appData = data;
                        document.getElementById('totalPeople').value = appData.totalPeople;
                    }
                    updateExpenseList();
                    document.getElementById('syncStatus').innerText = "‚úÖ CONNECTION ESTABLISHED.";
                    document.getElementById('syncStatus').style.color = "var(--poke-green)";
                })
                .catch(error => {
                    document.getElementById('syncStatus').innerText = "‚ùå CONNECTION FAILED!";
                    document.getElementById('syncStatus').style.color = "red";
                });
        }

        function saveDataToCloud() {
            appData.totalPeople = parseInt(document.getElementById('totalPeople').value) || 5;
            document.getElementById('syncStatus').innerText = "‚è≥ SAVING GAME...";
            document.getElementById('syncStatus').style.color = "var(--poke-yellow)";

            const formData = new URLSearchParams();
            formData.append('data', JSON.stringify(appData));

            fetch(GOOGLE_SHEET_URL, { method: 'POST', body: formData })
                .then(response => response.text())
                .then(result => {
                    document.getElementById('syncStatus').innerText = "‚úÖ GAME SAVED!";
                    document.getElementById('syncStatus').style.color = "var(--poke-green)";
                })
                .catch(error => {
                    document.getElementById('syncStatus').innerText = "‚ùå SAVE ERROR. THE SAVE FILE IS CORRUPTED.";
                    document.getElementById('syncStatus').style.color = "red";
                });
        }

        function addExpense() {
            let name = document.getElementById('expName').value.trim();
            let desc = document.getElementById('expDesc').value.trim();
            let amount = parseFloat(document.getElementById('expAmount').value.replace(',', '.'));

            if (!name || isNaN(amount) || amount <= 0) {
                alert("OAK'S WORDS: 'Now is not the time to use that!' (Enter Name & Cost)");
                return;
            }

            appData.expenses.push({ name: name, desc: desc, amount: amount });
            
            document.getElementById('expDesc').value = '';
            document.getElementById('expAmount').value = '';
            
            updateExpenseList();
            document.getElementById('splitResult').innerHTML = ''; 
            
            saveDataToCloud();
        }

        function updateExpenseList() {
            let listDiv = document.getElementById('expenseList');
            if (!appData.expenses || appData.expenses.length === 0) {
                listDiv.innerHTML = "<small>BAG IS EMPTY.</small>";
                return;
            }
            
            let html = '<h3>INVENTORY (ITEMS USED):</h3>';
            appData.expenses.forEach((ex, i) => {
                html += `
                <div class="expense-item">
                    <div><b style='color: var(--poke-ui-blue)'>${ex.name}</b> used <br>${ex.desc} (${ex.amount.toFixed(2)}‚ÇΩ)</div>
                    <button class="del-btn" onclick="removeExpense(${i})">TOSS</button>
                </div>`;
            });
            listDiv.innerHTML = html;
        }

        function removeExpense(index) {
            appData.expenses.splice(index, 1);
            updateExpenseList();
            document.getElementById('splitResult').innerHTML = '';
            saveDataToCloud();
        }

        function calculateSplit() {
            if (!appData.expenses || appData.expenses.length === 0) {
                alert("NO DATA! CAN'T USE 'CALCULATE'.");
                return;
            }

            let totalPeople = parseInt(document.getElementById('totalPeople').value);
            let total = 0;
            let paidPerPerson = {};

            appData.expenses.forEach(ex => {
                total += ex.amount;
                let nameKey = ex.name.charAt(0).toUpperCase() + ex.name.slice(1).toLowerCase();
                if (!paidPerPerson[nameKey]) paidPerPerson[nameKey] = 0;
                paidPerPerson[nameKey] += ex.amount;
            });

            let perPersonAvg = total / totalPeople;
            let numPayers = Object.keys(paidPerPerson).length;
            
            let html = `<h3>üí∏ BATTLE RESULTS:</h3><p><b>TOTAL:</b> ${total.toFixed(2)} ‚ÇΩ</p><p><b>PER TRAINER (${totalPeople}):</b> ${perPersonAvg.toFixed(2)} ‚ÇΩ</p><hr><ul>`;

            for (let person in paidPerPerson) {
                let balance = paidPerPerson[person] - perPersonAvg;
                if (balance > 0.01) {
                    html += `<li><span style='color:var(--poke-green)'>${person} GAINS <b>${balance.toFixed(2)} ‚ÇΩ</b>!</span></li>`;
                } else if (balance < -0.01) {
                    html += `<li><span style='color:var(--poke-red)'>${person} PAYS <b>${Math.abs(balance).toFixed(2)} ‚ÇΩ</b>!</span></li>`;
                } else {
                    html += `<li>${person} IS BALANCED.</li>`;
                }
            }

            let freeloaders = totalPeople - numPayers;
            if (freeloaders > 0) {
                html += `<br><li><span style='color:var(--poke-red)'><b>WILD WARNING:</b> ${freeloaders} IDLE TRAINER(S) MUST PAY <b>${perPersonAvg.toFixed(2)} ‚ÇΩ</b> EACH!</span></li>`;
            }

            html += `</ul>`;
            document.getElementById('splitResult').innerHTML = html;
        }

        // --- DEINE EIGENEN FRAGEN LOGIK ---
        
        // HIER KANNST DU JETZT EIGENE FRAGEN EINTRAGEN:
        const questions = [
            { 
                question: "Der wilde Br√§utigam greift an! Was ist seine gr√∂√üte Schw√§che? (Hier deine Frage eintragen...)", 
                answers: ["Attacke 1 (Falsch)", "Attacke 2 (Richtig)", "Attacke 3 (Falsch)", "Attacke 4 (Falsch)"], 
                correct: 1 // 0=erste, 1=zweite, 2=dritte, 3=vierte Antwort ist richtig.
            }
            // Kopiere einfach den Block da dr√ºber und f√ºge ein Komma dazwischen ein, wenn du mehr Fragen willst!
        ];

        let currentQuestionIndex = 0;

        function showQuestion() {
            const q = questions[currentQuestionIndex];
            document.getElementById("progress").innerText = `TURN ${currentQuestionIndex + 1} / ${questions.length}`;
            // Simuliert das langsame Schreiben des Textes wie im Spiel
            const questionElement = document.getElementById("question");
            questionElement.innerText = "";
            let i = 0;
            let typingEffect = setInterval(() => {
                if (i < q.question.length) {
                    questionElement.innerHTML += q.question.charAt(i);
                    i++;
                } else {
                    clearInterval(typingEffect);
                }
            }, 30); // Geschwindigkeit des Tippens

            document.getElementById("answers").innerHTML = "";
            document.getElementById("feedback").style.display = "none";
            document.getElementById("next-btn").style.display = "none";

            q.answers.forEach((answer, index) => {
                const btn = document.createElement("button");
                // F√ºgt einen kleinen Pfeil vor die Antworten wie im Spiel-Men√º
                btn.innerHTML = "> " + answer;
                btn.classList.add("btn");
                btn.onclick = () => checkAnswer(btn, index);
                document.getElementById("answers").appendChild(btn);
            });
        }

        function checkAnswer(clickedBtn, index) {
            const q = questions[currentQuestionIndex];
            const feedbackDiv = document.getElementById("feedback");
            feedbackDiv.style.display = "block";
            const buttons = document.querySelectorAll("#answers .btn");
            
            buttons.forEach(btn => btn.disabled = true);

            if (index === q.correct) {
                clickedBtn.classList.add("correct-ans");
                feedbackDiv.innerHTML = "It's super effective!<br>The crew takes a drink damage!";
                feedbackDiv.className = "correct";
            } else {
                clickedBtn.classList.add("wrong-ans");
                buttons[q.correct].classList.add("correct-ans");
                feedbackDiv.innerHTML = "It's not very effective...<br>The groom is hurt by recoil (drinks)!";
                feedbackDiv.className = "wrong";
            }
            document.getElementById("next-btn").style.display = "block";
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                showQuestion();
            } else {
                document.getElementById("progress").innerText = "BATTLE ENDED";
                document.getElementById("question").innerText = "Trainer defeated! You received 0 Pok√©dollars.";
                document.getElementById("answers").innerHTML = "";
                document.getElementById("next-btn").style.display = "none";
                document.getElementById("feedback").style.display = "block";
                document.getElementById("feedback").innerHTML = "THE BATTLE IS OVER! <br><br> CHECK GROOM'S HP BAR. CHEERS! üçª";
                document.getElementById("feedback").className = "correct";
            }
        }

        // Kleiner Timeout beim Starten, damit die Schriftart laden kann
        setTimeout(showQuestion, 500);
    </script>
</body>
</html>
