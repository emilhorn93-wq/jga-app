<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JGA 8-BIT CENTER</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* ============ 8-BIT DESIGN START ============ */
        :root {
            --retro-bg: #e0e0e0;        
            --retro-container: #ffffff; 
            --retro-text: #222222;      
            --retro-border: #000000;    
            --retro-yellow: #ffcc00;    
            --retro-red: #ff0000;       
            --retro-green: #00cc00;     
            --retro-blue: #0000ff;      
            --retro-shadow: 4px 4px 0px #000000; 
        }

        body {
            font-family: 'Press Start 2P', cursive, monospace; 
            background-color: var(--retro-bg);
            color: var(--retro-text);
            text-align: center;
            padding: 20px;
            margin: 0;
            image-rendering: pixelated; 
            font-size: 12px; 
            line-height: 1.5;
        }
        
        h1 { 
            color: var(--retro-text); 
            text-shadow: 2px 2px 0px var(--retro-yellow);
            font-size: 20px;
            margin-bottom: 30px;
            text-transform: uppercase;
        }
        h2, h3 {
            color: var(--retro-text);
            font-size: 16px;
            margin-top: 25px;
        }

        .container {
            background-color: var(--retro-container);
            border: 4px solid var(--retro-border); 
            padding: 25px;
            box-shadow: var(--retro-shadow); 
            max-width: 500px;
            margin: 0 auto;
            position: relative;
            border-radius: 0; 
        }
        
        /* RETRO BUTTONS */
        .btn {
            font-family: 'Press Start 2P', cursive, monospace;
            background-color: #cccccc; 
            color: var(--retro-text);
            border: 4px solid var(--retro-border);
            padding: 15px 10px;
            margin: 12px 0;
            font-size: 12px;
            cursor: pointer;
            width: 100%;
            transition: all 0.1s;
            text-transform: uppercase;
            box-shadow: inset -4px -4px 0px #999999, inset 4px 4px 0px #ffffff; 
            border-radius: 0;
        }
        .btn:hover { background-color: #bbbbbb; }
        .btn:active { 
            transform: translate(2px, 2px); 
            box-shadow: inset -2px -2px 0px #999999, inset 2px 2px 0px #ffffff;
        }
        
        .btn.primary { background-color: var(--retro-yellow); box-shadow: inset -4px -4px 0px #cc9900, inset 4px 4px 0px #ffff66; }
        .btn.quiz-btn { background-color: var(--retro-blue); color: white; box-shadow: inset -4px -4px 0px #000099, inset 4px 4px 0px #6666ff; }
        .btn.save-btn { background-color: var(--retro-green); color: white; box-shadow: inset -4px -4px 0px #006600, inset 4px 4px 0px #66ff66; }
        .btn.back-btn { background-color: #777; color: white; margin-top: 30px; box-shadow: inset -4px -4px 0px #444, inset 4px 4px 0px #aaa;}

        /* EINGABEFELDER IM RETRO LOOK */
        input[type="text"], input[type="number"] {
            font-family: 'Press Start 2P', cursive, monospace;
            width: 90%;
            padding: 10px;
            margin: 8px 0;
            border: 4px solid var(--retro-border);
            background-color: #ffffff;
            color: var(--retro-text);
            font-size: 12px;
            border-radius: 0;
            box-shadow: inset 2px 2px 0px #999;
        }
        
        /* QUIZ FEEDBACK */
        .btn.correct-ans { background-color: var(--retro-green) !important; color: white; }
        .btn.wrong-ans { background-color: var(--retro-red) !important; color: white; }
        #feedback { font-size: 14px; margin-top: 20px; min-height: 60px; padding: 10px; border: 4px solid black; display: none;}
        .correct { background-color: var(--retro-green); color: white; }
        .wrong { background-color: var(--retro-red); color: white; }
        #next-btn { display: none; margin-top: 20px; }
        
        /* KATZEKASSE STYLES */
        .expense-item {
            background-color: #ffffff;
            padding: 10px;
            border: 2px solid var(--retro-border);
            margin: 5px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 10px;
        }
        .del-btn { 
            background-color: var(--retro-red); 
            color: white; 
            border: 2px solid black; 
            padding: 4px 8px; 
            cursor: pointer; 
            font-family: inherit;
            font-size: 10px;
        }
        #splitResult { text-align: left; background-color: #fff; padding: 15px; border: 4px solid black; margin-top: 15px; font-size: 10px;}
        #splitResult ul { padding-left: 10px; list-style-type: square; }
        #splitResult li { margin-bottom: 10px; }
        #syncStatus { font-size: 10px; color: #666; margin-bottom: 15px; text-transform: uppercase; }
        /* ============ 8-BIT DESIGN END ============ */
    </style>
</head>
<body>

    <div class="container">
        <div id="menu" class="page active">
            <h1>üëæ JGA 8-BIT CENTER üëæ</h1>
            <p>PRESS START TO DRINK</p>
            <br>
            <button class="btn primary" onclick="showPage('kasse'); loadDataFromCloud();">üí∞ KATZEKASSE (SYNC)</button>
            <button class="btn quiz-btn" onclick="showPage('quiz')">ü§ì NERD QUIZ Lvl.99</button>
        </div>

        <div id="kasse" class="page">
            <h2>üí∞ INSERT COIN</h2>
            <div id="syncStatus">‚òÅÔ∏è CONNECTING TO SERVER...</div>
            
            <p>PLAYER COUNT:</p>
            <input type="number" id="totalPeople" value="5" min="2" onchange="saveDataToCloud()">
            
            <hr style="border: 2px solid black; margin: 20px 0;">
            
            <h3>NEW HIGH SCORE (AUSGABE)</h3>
            <input type="text" id="expName" placeholder="PLAYER NAME (z.B. Max)">
            <input type="text" id="expDesc" placeholder="ITEM (z.B. Bier)">
            <input type="number" id="expAmount" placeholder="CREDITS in ‚Ç¨">
            <button class="btn save-btn" onclick="addExpense()">‚ûï SAVE GAME</button>
            
            <div id="expenseList" style="margin-top: 20px;"></div>
            
            <button class="btn primary" style="margin-top: 20px;" onclick="calculateSplit()">üìä CALC RESULTS</button>
            
            <div id="splitResult"></div>
            <button class="btn back-btn" onclick="showPage('menu')">‚¨ÖÔ∏è BACK TO MENU</button>
        </div>

        <div id="quiz" class="page">
            <h2>ü§ì TRAINER BATTLE ü§ì</h2>
            <div id="progress" style="color:#666; font-size:10px; margin-bottom:15px;">STAGE 1 / 1</div>
            
            <div style="border: 4px solid black; padding: 10px; margin-bottom: 20px; background: #fff;">
                 <div id="question" style="font-size: 12px;">LOADING DATA...</div>
            </div>

            <div id="answers"></div>
            <div id="feedback"></div>
            <button id="next-btn" class="btn quiz-btn" onclick="nextQuestion()">NEXT STAGE ‚û°Ô∏è</button>
            <button class="btn back-btn" onclick="showPage('menu')">‚¨ÖÔ∏è RUN AWAY</button>
        </div>
    </div>

    <script>
        // ==========================================
        // ‚ö†Ô∏è DEINE GOOGLE TABELLEN URL HIER EINF√úGEN:
        const GOOGLE_SHEET_URL = "HIER_DEINE_URL_EINF√úGEN";
        // ==========================================

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
        }

        // --- CLOUD DATENBANK LOGIK ---
        let appData = { totalPeople: 5, expenses: [] };

        function loadDataFromCloud() {
            if (GOOGLE_SHEET_URL === "HIER_DEINE_URL_EINF√úGEN") {
                document.getElementById('syncStatus').innerText = "‚ö†Ô∏è INSERT URL ERROR!";
                document.getElementById('syncStatus').style.color = "red";
                return;
            }

            document.getElementById('syncStatus').innerText = "‚òÅÔ∏è DOWNLOADING DATA...";
            
            fetch(GOOGLE_SHEET_URL)
                .then(response => response.json())
                .then(data => {
                    if (data && data.expenses) {
                        appData = data;
                        document.getElementById('totalPeople').value = appData.totalPeople;
                    }
                    updateExpenseList();
                    document.getElementById('syncStatus').innerText = "‚úÖ OK! SERVER CONNECTED.";
                    document.getElementById('syncStatus').style.color = "green";
                })
                .catch(error => {
                    document.getElementById('syncStatus').innerText = "‚ùå LOAD ERROR!";
                    document.getElementById('syncStatus').style.color = "red";
                });
        }

        function saveDataToCloud() {
            appData.totalPeople = parseInt(document.getElementById('totalPeople').value) || 5;
            document.getElementById('syncStatus').innerText = "‚è≥ SAVING...";
            document.getElementById('syncStatus').style.color = "#ffcc00";

            const formData = new URLSearchParams();
            formData.append('data', JSON.stringify(appData));

            fetch(GOOGLE_SHEET_URL, { method: 'POST', body: formData })
                .then(response => response.text())
                .then(result => {
                    document.getElementById('syncStatus').innerText = "‚úÖ GAME SAVED!";
                    document.getElementById('syncStatus').style.color = "green";
                })
                .catch(error => {
                    document.getElementById('syncStatus').innerText = "‚ùå SAVE ERROR!";
                    document.getElementById('syncStatus').style.color = "red";
                });
        }

        function addExpense() {
            let name = document.getElementById('expName').value.trim();
            let desc = document.getElementById('expDesc').value.trim();
            let amount = parseFloat(document.getElementById('expAmount').value.replace(',', '.'));

            if (!name || isNaN(amount) || amount <= 0) {
                alert("ERROR: ENTER NAME & CREDITS!");
                return;
            }

            appData.expenses.push({ name: name, desc: desc, amount: amount });
            
            document.getElementById('expDesc').value = '';
            document.getElementById('expAmount').value = '';
            
            updateExpenseList();
            document.getElementById('splitResult').innerHTML = ''; 
            
            saveDataToCloud();
        }

        function updateExpenseList() {
            let listDiv = document.getElementById('expenseList');
            if (!appData.expenses || appData.expenses.length === 0) {
                listDiv.innerHTML = "<small>NO ITEMS YET.</small>";
                return;
            }
            
            let html = '<h3>INVENTORY (AUSGABEN):</h3>';
            appData.expenses.forEach((ex, i) => {
                html += `
                <div class="expense-item">
                    <div><b>${ex.name}</b>: ${ex.amount.toFixed(2)}‚Ç¨ <br><small>${ex.desc}</small></div>
                    <button class="del-btn" onclick="removeExpense(${i})">DEL</button>
                </div>`;
            });
            listDiv.innerHTML = html;
        }

        function removeExpense(index) {
            appData.expenses.splice(index, 1);
            updateExpenseList();
            document.getElementById('splitResult').innerHTML = '';
            saveDataToCloud();
        }

        function calculateSplit() {
            if (!appData.expenses || appData.expenses.length === 0) {
                alert("NO DATA TO CALCULATE!");
                return;
            }

            let totalPeople = parseInt(document.getElementById('totalPeople').value);
            let total = 0;
            let paidPerPerson = {};

            appData.expenses.forEach(ex => {
                total += ex.amount;
                let nameKey = ex.name.charAt(0).toUpperCase() + ex.name.slice(1).toLowerCase();
                if (!paidPerPerson[nameKey]) paidPerPerson[nameKey] = 0;
                paidPerPerson[nameKey] += ex.amount;
            });

            let perPersonAvg = total / totalPeople;
            let numPayers = Object.keys(paidPerPerson).length;
            
            let html = `<h3>üí∏ RESULTS:</h3><p><b>TOTAL:</b> ${total.toFixed(2)} ‚Ç¨</p><p><b>PER PLAYER (${totalPeople}):</b> ${perPersonAvg.toFixed(2)} ‚Ç¨</p><hr style="border:2px solid black;"><ul>`;

            for (let person in paidPerPerson) {
                let balance = paidPerPerson[person] - perPersonAvg;
                if (balance > 0.01) {
                    html += `<li><span style='color:green'>${person} GETS: <b>${balance.toFixed(2)} ‚Ç¨</b></span></li>`;
                } else if (balance < -0.01) {
                    html += `<li><span style='color:red'>${person} PAYS: <b>${Math.abs(balance).toFixed(2)} ‚Ç¨</b></span></li>`;
                } else {
                    html += `<li>${person} IS BALANCED.</li>`;
                }
            }

            let freeloaders = totalPeople - numPayers;
            if (freeloaders > 0) {
                html += `<br><li><span style='color:red'><b>WARNING:</b> ${freeloaders} IDLE PLAYER(S) MUST PAY <b>${perPersonAvg.toFixed(2)} ‚Ç¨</b> EACH!</span></li>`;
            }

            html += `</ul>`;
            document.getElementById('splitResult').innerHTML = html;
        }

        // --- DEINE EIGENEN FRAGEN LOGIK ---
        
        // HIER KANNST DU JETZT EIGENE FRAGEN EINTRAGEN:
        const questions = [
            { 
                question: "Hier kommt deine allererste Frage rein! (z.B. Wie hei√üt der Br√§utigam mit zweitem Vornamen?)", 
                answers: ["Falsche Antwort 1", "Richtige Antwort", "Falsche Antwort 2", "Falsche Antwort 3"], 
                correct: 1 // 0 ist die erste Antwort, 1 die zweite, 2 die dritte, 3 die vierte.
            }
            // Kopiere einfach den Block da dr√ºber, wenn du mehr Fragen willst!
        ];

        let currentQuestionIndex = 0;

        function showQuestion() {
            const q = questions[currentQuestionIndex];
            document.getElementById("progress").innerText = `STAGE ${currentQuestionIndex + 1} / ${questions.length}`;
            document.getElementById("question").innerText = q.question;
            document.getElementById("answers").innerHTML = "";
            document.getElementById("feedback").style.display = "none";
            document.getElementById("next-btn").style.display = "none";

            q.answers.forEach((answer, index) => {
                const btn = document.createElement("button");
                btn.innerText = answer;
                btn.classList.add("btn");
                btn.onclick = () => checkAnswer(btn, index);
                document.getElementById("answers").appendChild(btn);
            });
        }

        function checkAnswer(clickedBtn, index) {
            const q = questions[currentQuestionIndex];
            const feedbackDiv = document.getElementById("feedback");
            feedbackDiv.style.display = "block";
            const buttons = document.querySelectorAll("#answers .btn");
            
            buttons.forEach(btn => btn.disabled = true);

            if (index === q.correct) {
                clickedBtn.classList.add("correct-ans");
                feedbackDiv.innerHTML = "‚úÖ IT'S SUPER EFFECTIVE!<br>üç∫ CREW DRINKS! üç∫";
                feedbackDiv.className = "correct";
            } else {
                clickedBtn.classList.add("wrong-ans");
                buttons[q.correct].classList.add("correct-ans");
                feedbackDiv.innerHTML = "‚ùå IT'S NOT VERY EFFECTIVE...<br>üç∫ GROOM DRINKS! üç∫";
                feedbackDiv.className = "wrong";
            }
            document.getElementById("next-btn").style.display = "block";
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                showQuestion();
            } else {
                document.getElementById("progress").innerText = "GAME OVER";
                document.getElementById("question").innerText = "ALL STAGES CLEARED!";
                document.getElementById("answers").innerHTML = "";
                document.getElementById("next-btn").style.display = "none";
                document.getElementById("feedback").style.display = "block";
                document.getElementById("feedback").innerHTML = "FINAL SCORE REACHED! <br><br> IS THE GROOM STILL ALIVE? CHEERS! üçª";
                document.getElementById("feedback").className = "correct";
            }
        }

        showQuestion();
    </script>
</body>
</html>
